<app-loader *ngIf="loading"></app-loader>
<div class="container" *ngIf="!loading" id="setting-item">
    <div class="auth">
        Authorized as&nbsp;<b>{{authorizationParameters.email}}</b>
        <br />
        <a class="link" [routerLink]="['/authorize']">Unauthorize</a>
    </div>
    <div class="actions" *ngIf="integrationLinkDetails && integrationLinkDetails.length">
        <button mat-stroked-button [routerLink]="['/addfeatureflag']">Link additional feature flag</button>
        <button mat-stroked-button [routerLink]="['/createfeatureflag']">Create and link feature flag</button>
    </div>
    <div *ngIf="!integrationLinkDetails || !integrationLinkDetails.length" class="empty">
        <div class="text">
            You have no linked feature flags.
        </div>
        <div class="buttons">
            <button mat-flat-button [routerLink]="['/addfeatureflag']" color="primary">Link existing feature
                flag</button>
            <span> or </span>
            <button mat-stroked-button [routerLink]="['/createfeatureflag']">Create and link feature flag</button>
        </div>
    </div>
    <div *ngFor="let integrationLinkDetail of integrationLinkDetails">
        <configcat-setting-item [basicAuthUsername]="authorizationParameters.basicAuthUsername"
            [basicAuthPassword]="authorizationParameters.basicAuthPassword"
            [productId]="integrationLinkDetail.product?.productId ?? ''"
            [configId]="integrationLinkDetail.config?.configId || ''"
            [environmentId]="integrationLinkDetail.environment?.environmentId || ''"
            [settingId]="integrationLinkDetail.setting?.settingId || 0" [canEditSetting]=false
            (deleteSettingRequested)="onDeleteSettingRequested($event)" deleteSettingText="Unlink"
            [showEnvironmentName]="true">
        </configcat-setting-item>
    </div>
</div>