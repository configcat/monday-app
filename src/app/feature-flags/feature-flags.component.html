@if (loading) {
  <app-loader></app-loader>
}
@if (!loading) {
  <div class="container" id="setting-item">
    <div class="auth">
      <div>
        Authorized as&nbsp;<b>{{authorizationParameters.email}}</b>
        <br />
        <a class="link" [routerLink]="['/authorize']">Unauthorize</a>
      </div>
    </div>
    @if (integrationLinkDetails && integrationLinkDetails.length) {
      <div class="actions">
        <button mat-stroked-button [routerLink]="['/createfeatureflag']">Create and link feature flag</button>
        <button mat-stroked-button [routerLink]="['/addfeatureflag']">Link additional feature flag</button>
      </div>
    }
    @if (!integrationLinkDetails || !integrationLinkDetails.length) {
      <div class="empty">
        <div class="text">
          You have no linked feature flags.
        </div>
        <div class="buttons">
          <button mat-flat-button [routerLink]="['/addfeatureflag']" color="primary">Link existing feature
          flag</button>
          <span> or </span>
          <button mat-stroked-button [routerLink]="['/createfeatureflag']">Create and link feature flag</button>
        </div>
      </div>
    }
    @for (integrationLinkDetail of integrationLinkDetails; track integrationLinkDetail) {
      <div>
        @if (integrationLinkDetail.config.evaluationVersion === EvaluationVersion.V1) {
          <configcat-setting-item
            [basicAuthUsername]="authorizationParameters.basicAuthUsername"
            [basicAuthPassword]="authorizationParameters.basicAuthPassword"
            [productId]="integrationLinkDetail.product?.productId ?? ''"
            [configId]="integrationLinkDetail.config?.configId || ''"
            [environmentId]="integrationLinkDetail.environment?.environmentId || ''"
            [settingId]="integrationLinkDetail.setting?.settingId || 0"
            (deleteSettingRequested)="onDeleteSettingRequested($event)" deleteSettingText="Unlink"
            [showEnvironmentName]="true">
          </configcat-setting-item>
        }
        @if (integrationLinkDetail.config.evaluationVersion === EvaluationVersion.V2) {
          <configcat-feature-flag-item
            [basicAuthUsername]="authorizationParameters.basicAuthUsername"
            [basicAuthPassword]="authorizationParameters.basicAuthPassword"
            [productId]="integrationLinkDetail.product?.productId ?? ''"
            [configId]="integrationLinkDetail.config?.configId || ''"
            [environmentId]="integrationLinkDetail.environment?.environmentId || ''"
            [settingId]="integrationLinkDetail.setting?.settingId || 0"
            (deleteSettingRequested)="onDeleteSettingRequested($event)" deleteSettingText="Unlink"
            [showEnvironmentName]="true">
          </configcat-feature-flag-item>
        }
      </div>
    }
    <div class="help">
      Need help? Read more at &nbsp; <a href="https://configcat.com/docs/integrations/monday" target="_blank">the
    documentation</a>.
  </div>
</div>
}